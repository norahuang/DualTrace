\startchapter{Conclusions and Future Work}
\label{concl}
This thesis illustrates a novel idea and approach for dynamic program analysis which considers the interaction of two programs. This idea is valuable due to the fact that programs or malware in the real world work collaboratively. The analysis of the communication and interaction of the programs provide more reliable information for vulnerability detection and program analysis.

In this thesis, I presented an approach to analyze two traces to understand how they communicate with each other. I first defined a communication model. This abstract model depicts the outline of a communication between two running programs, which gives the ground rules for the communication analysis. Then I presented the  formalization of the dual\_trace. The formalization indicates that all traces comply to it can be used to conduct the communication analysis.

I also developed the algorithms for the communication identification. The developed algorithms not only solve the problem for specific communication methods but also provide clear and referable examples for developing other algorithms for other communication methods which are not discussed in this thesis.

On top of the existing execution trace analysis environment Atlantis, I implemented the communication identification features. This feature provides the users a way to extend their concerned communication methods through the configuration file. The user interface allows the users to conduct the communication and stream identification from the dual\_traces and navigate back from the identified result to the views of the trace in Atlantis. The experiments conducted in this work demonstrate the feasibility and usability of the model and the algorithms. 

\section{Discussion}
With the communication analysis prototype the user can reconstruct the communications easily. They need to understand the communication model to know what information they should retrieve from the traces to reconstruct the communications. Then they have to understand the communication method they want to investigate and follow the function descriptor formalization to develop the function descriptor for this communication method. With the function descriptor, the user actually can use the old Atlantis (without the implementation of this prototype) to perform the analysis. They need to search for all the function calls to the functions in the function descriptor, then manually go through all the function calls in the search results and follow the communication identification approach to match the streams by checking the parameter values from the reconstructed memory state of the instruction lines. This manual analysis can be extremely tedious and exhausting. In some situation, there might be a lot of communication captured in the traces and each of these communications contain a lot of message exchanges. So manually perform the analysis could be a infeasible task.

The communications identified from the dual\_trace give the necessary information, such as the transmitted data, the sequence of the packets of the communications which provide the user a whole picture of a communication. This would be helpful for the users who need to understand how the data flow between the programs. And might also help them to understand the architecture of the system. 

As described along with the stream matching and  data verification algorithms before, the identified communications might be errors. So I designed a feature to just output the streams from both traces from a dual\_trace to give the user more original information from the traces. By this original information, the user might be able to decide if the identified communications are the real one.

The other limitation of this research is that the user need to specify the communication method for the analysis. This means the user must be an expert who understand all the possible communication would happen between the two programs that are under investigated. For example, if the user doesn't know that the two interacting programs were communicated through TCP sockets, even thought the communication did happen, they can not be identified. 

In conclusion, even though has limitations, this work is novel and shows its value for guiding the communication analysis through assembly execution traces. In addition the implemented prototype is the unique tool at the time of writing for the communication analysis for running programs in assembly level.

\section{Future Works}

Future works of this research includes:
\begin{itemize}
\item Extend the model to be more generalize for all kinds of interaction but not only the message transferring communications, for example remote procedure call
\item Visualize the communications identified from the dual\_trace (A sequence diagram might be a good choice to illustrate all the events in the traces and the matched events from both traces.) 
\item Conduct user studies of the communication analysis approach and the prototype. We can design the communication analysis use cases, recruit some software security engineers, explain the task to them, observe their actions when the performing the tasks and see if they can achieve the goal. Following interviews or survey can be involved to study if they think this approach and prototype can benefit the vulnerability detection or comprehension of the behaviour of the programs.
\item Conduct an empirical study to properly evaluate the algorithms and implementation presented in this thesis. We can run some software that contain known vulnerabilities that are related to communication. See if the communication identification can help to detect these vulnerabilities.
\item Apply the communication analysis approach developed in this thesis on the practical problems, for example, the analysis of Inter-Component communication of Android. 
\end{itemize}

Accomplish of the first two future works can make the communication analysis method developed in this work more complete. The last three future works can validate the usefulness and Usability of this work.


