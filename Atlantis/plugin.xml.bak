<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

   <extension
         id="application"
         name="ATLANTIS Trace Analysis Environment"
         point="org.eclipse.core.runtime.applications">
      <application>
         <run
               class="ca.uvic.chisel.atlantis.AtlantisApplication">
         </run>
      </application>
   </extension>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            name="Trace Analysis"
            class="ca.uvic.chisel.atlantis.Perspective"
            id="ca.uvic.chisel.atlantis.perspective">
      </perspective>
   </extension>
  <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            name="Dual Trace Analysis"
            class="ca.uvic.chisel.atlantis.DualTracePerspective"
            id="ca.uvic.chisel.atlantis.dualTracePerspective">
      </perspective>
   </extension>
   <extension
         id="product"
         name="ATLANTIS Trace Analysis Environment"
         point="org.eclipse.core.runtime.products">
      <product
            name="ATLANTIS Trace Analysis Environment"
            application="ca.uvic.chisel.atlantis.application">
         <property
               name="appName"
               value="ATLANTIS Trace Analysis Environment">
         </property>
         <property
               name="aboutImage"
               value="icons/alt_about.gif">
         </property>
         <property
               name="aboutText"
               value="ATLANTIS Trace Analysis Environment&#x0A;&#x0A;Version: 0.2.0&#x0A;&#x0A;Please see ChangeLog.txt, README.md, and Release-Notes.md for details.">
         </property>
         <property
               name="windowImages"
               value="icons/alt_window_16.gif,icons/alt_window_32.gif">
         </property>
         
         <property
               name="cssTheme"
               value="org.eclipse.e4.ui.css.theme.e4_default">
         </property>
         <property
				name="applicationCSSResources"
          value="platform:/plugin/org.eclipse.platform/images/">
		  </property>
      </product>
       
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <category
            id="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            name="Trace Analysis">
      </category>
      <view
            category="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            class="ca.uvic.chisel.atlantis.eventtracevisualization.ThreadEventTraceVisualizationView"
            id="ca.uvic.chisel.atlantis.views.ThreadEventTraceVisualizationView"
            name="Thread Trace Visualization"
            restorable="true">
      </view>
      <view
            category="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            class="ca.uvic.chisel.atlantis.views.RegistersView"
            icon="icons/register_view.gif"
            id="ca.uvic.chisel.atlantis.views.RegistersView"
            name="Registers"
            restorable="true">
      </view>
      <view
            category="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            class="ca.uvic.chisel.atlantis.views.MemoryVisualization"
            id="ca.uvic.chisel.atlantis.views.MemoryVisualization"
            name="Memory (List View)"
            restorable="true">
      </view>
      <view
            category="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            class="ca.uvic.chisel.atlantis.eventtracevisualization.AssemblyTraceVisualizationView"
            id="ca.uvic.chisel.atlantis.views.AssemblyTraceVisualizationView"
            name="Assembly Trace Visualization"
            restorable="true">
      </view>
      <view
            category="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            class="ca.uvic.chisel.atlantis.views.WatchedView"
            icon="icons/register_view.gif"
            id="ca.uvic.chisel.atlantis.views.WatchedView"
            name="Watched"
            restorable="true">
      </view>
      <view
            category="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            class="ca.uvic.chisel.atlantis.views.HexVisualization"
            id="ca.uvic.chisel.atlantis.views.HexVisualization"
            name="Trace Memory"
            restorable="true">
      </view>
      <view
            category="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            class="ca.uvic.chisel.atlantis.views.FunctionsView"
            icon="icons/register_view.gif"
            id="ca.uvic.chisel.atlantis.views.FunctionsView"
            name="Functions"
            restorable="true">
      </view>
      <view
            category="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            class="ca.uvic.chisel.atlantis.views.ThreadFunctionsView"
            icon="icons/register_view.gif"
            id="ca.uvic.chisel.atlantis.views.ThreadFunctionsView"
            name="Thread Functions"
            restorable="true">
      </view>
      <view
            category="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            class="ca.uvic.chisel.atlantis.views.MemorySearchView"
            icon="icons/memory_search_view.gif"
            id="ca.uvic.chisel.atlantis.views.MemorySearchView"
            name="Memory Search"
            restorable="true">
      </view>
      <view
            category="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            class="ca.uvic.chisel.atlantis.views.RecompositionView"
            icon="icons/recomposition_view.gif"
            id="ca.uvic.chisel.atlantis.views.RecompositionView"
            name="Function Recomposition"
            restorable="true">
      </view>
      <view
            category="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            class="ca.uvic.chisel.atlantis.views.AtlantisSearchView"
            icon="icons/search.gif"
            id="ca.uvic.chisel.atlantis.views.AtlantisSearchView"
            name="Search Assembly"
            restorable="true">
      </view>
      <view
            category="ca.uvic.chisel.atlantis.TraceAnalysisViews"
            class="ca.uvic.chisel.atlantis.views.MessageTypesView"
            icon="icons/message.png"
            id="ca.uvic.chisel.atlantis.views.MessageTypesView"
            name="Communication Types"
            restorable="true">
      </view>
   </extension>
   <!-- Single Trace Perspective, Main Window -->
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="ca.uvic.chisel.atlantis.perspective">
         <view
               id="ca.uvic.chisel.bfv.views.BigFileProjectNavigator"
               minimized="false"
               ratio=".21f"
               relationship="left"
               relative="org.eclipse.ui.editorss"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.AtlantisSearchView"
               name="Search Current File"
               minimized="false"
               ratio=".35f"
               relationship="bottom"
               relative="ca.uvic.chisel.bfv.views.BigFileProjectNavigator"
               visible="true">
         </view>
         <view
               id="org.eclipse.ui.console.ConsoleView"
               moveable="true"
               minimized="false"
               ratio=".35f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.AtlantisSearchView"
               visible="false">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.RegistersView"
               minimized="false"
               closeable="false"
               ratio="0.3f"
               relationship="bottom"
               relative="ca.uvic.chisel.atlantis.views.AtlantisSearchView"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.bfv.views.RegionsView"
               minimized="false"
               closeable="false"
               ratio="0.73"
               relationship="right"
               relative="org.eclipse.ui.editorss"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.bfv.views.TagsView"
               minimized="false"
               closeable="false"
               relationship="stack"
               relative="ca.uvic.chisel.bfv.views.RegionsView">
         </view>
         <view
               id="ca.uvic.chisel.bfv.views.CommentsView"
               minimized="false"
               closeable="false"
               relationship="stack"
               relative="ca.uvic.chisel.bfv.views.RegionsView">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.MessageTypesView"
               minimized="false"
               closeable="false"
               relationship="stack"
               relative="ca.uvic.chisel.bfv.views.RegionsView"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.bfv.views.LayersView"
               minimized="false"
               closeable="false"
               ratio="0.5"
               relationship="stack"
               relative="ca.uvic.chisel.bfv.views.RegionsView">
         </view>
         <view
               id="org.eclipse.pde.runtime.LogView"
               minimized="false"
               relationship="stack"
               relative="org.eclipse.ui.console.ConsoleView"
               visible="false">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.FunctionsView"
               minimized="false"
               closeable="false"
               ratio="0.33f"
               relationship="top"
               relative="org.eclipse.ui.editorss"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.RecompositionView"
               minimized="false"
               closeable="false"
               ratio="0.33f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.FunctionsView"
               visible="true">
         </view>
         <view
               id="org.eclipse.pde.runtime.LogView"
               minimized="false"
               closeable="false"
               ratio="0.33f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.FunctionsView"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.HexVisualization"
               minimized="false"
               closeable="false"
               ratio="0.5f"
               relationship="top"
               relative="org.eclipse.ui.editorss"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.MemorySearchView"
               minimized="false"
               closeable="false"
               ratio="0.5f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.HexVisualization"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.ThreadFunctionsView"
               minimized="false"
               closeable="false"
               ratio="0.5f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.HexVisualization"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.ThreadEventTraceVisualizationView"
               minimized="false"
               closeable="false"
               ratio="0.5f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.ThreadFunctionsView"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.AssemblyTraceVisualizationView"
               minimized="false"
               closeable="false"
               ratio="0.5f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.ThreadEventTraceVisualizationView"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.WatchedView"
               minimized="false"
               closeable="false"
               relative="ca.uvic.chisel.bfv.views.RegionsView"
               relationship="bottom">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.MemoryVisualization"
               minimized="false"
               closeable="false"
               ratio=".20f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.WatchedView"
               visible="true">
         </view>
      </perspectiveExtension>
   </extension>
   <!-- Dual Trace Perspective, Secondary Window -->
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="ca.uvic.chisel.atlantis.dualTracePerspective">
            
         <view
               name="Placeholder for Dual Views, This Title Won't Render Though"
               id="ca.uvic.chisel.bfv.views.BigFileProjectNavigator"
               minimized="false"
               ratio=".21f"
               relationship="left"
               relative="org.eclipse.ui.editorss"
               visible="true">
         </view>
         
         <view
               id="ca.uvic.chisel.atlantis.views.AtlantisSearchView"
               name="Search Current File"
               minimized="false"
               ratio=".35f"
               relationship="bottom"
               relative="ca.uvic.chisel.bfv.views.BigFileProjectNavigator"
               visible="true">
         </view>

         <view
               id="org.eclipse.ui.console.ConsoleView"
               moveable="true"
               minimized="false"
               ratio=".35f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.AtlantisSearchView"
               visible="false">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.RegistersView"
               minimized="false"
               closeable="false"
               ratio="0.3f"
               relationship="bottom"
               relative="ca.uvic.chisel.atlantis.views.AtlantisSearchView"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.bfv.views.RegionsView"
               minimized="false"
               closeable="false"
               ratio="0.73"
               relationship="right"
               relative="org.eclipse.ui.editorss"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.bfv.views.TagsView"
               minimized="false"
               closeable="false"
               relationship="stack"
               relative="ca.uvic.chisel.bfv.views.RegionsView">
         </view>
         <view
               id="ca.uvic.chisel.bfv.views.CommentsView"
               minimized="false"
               closeable="false"
               relationship="stack"
               relative="ca.uvic.chisel.bfv.views.RegionsView">
         </view>
         <view
               id="ca.uvic.chisel.bfv.views.LayersView"
               minimized="false"
               closeable="false"
               ratio="0.5"
               relationship="stack"
               relative="ca.uvic.chisel.bfv.views.RegionsView">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.MessageTypesView"
               minimized="false"
               closeable="false"
               relationship="stack"
               relative="ca.uvic.chisel.bfv.views.RegionsView">
         </view>
         <view
               id="org.eclipse.pde.runtime.LogView"
               minimized="false"
               relationship="stack"
               relative="org.eclipse.ui.console.ConsoleView"
               visible="false">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.FunctionsView"
               minimized="false"
               closeable="false"
               ratio="0.33f"
               relationship="top"
               relative="org.eclipse.ui.editorss"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.RecompositionView"
               minimized="false"
               closeable="false"
               ratio="0.33f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.FunctionsView"
               visible="true">
         </view>
         <view
               id="org.eclipse.pde.runtime.LogView"
               minimized="false"
               closeable="false"
               ratio="0.33f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.FunctionsView"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.HexVisualization"
               minimized="false"
               closeable="false"
               ratio="0.5f"
               relationship="top"
               relative="org.eclipse.ui.editorss"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.MemorySearchView"
               minimized="false"
               closeable="false"
               ratio="0.5f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.HexVisualization"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.ThreadFunctionsView"
               minimized="false"
               closeable="false"
               ratio="0.5f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.HexVisualization"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.ThreadEventTraceVisualizationView"
               minimized="false"
               closeable="false"
               ratio="0.5f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.ThreadFunctionsView"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.AssemblyTraceVisualizationView"
               minimized="false"
               closeable="false"
               ratio="0.5f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.ThreadEventTraceVisualizationView"
               visible="true">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.WatchedView"
               minimized="false"
               closeable="false"
               relative="ca.uvic.chisel.bfv.views.RegionsView"
               relationship="bottom">
         </view>
         <view
               id="ca.uvic.chisel.atlantis.views.MemoryVisualization"
               minimized="false"
               closeable="false"
               ratio=".20f"
               relationship="stack"
               relative="ca.uvic.chisel.atlantis.views.WatchedView"
               visible="true">
         </view>
      </perspectiveExtension>
   </extension>
   
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="ca.uvic.chisel.atlantis.tracedisplayer.AtlantisTraceEditor"
            default="true"
            extensions="trace, index, original, xml, itable, vtable, offsets, column"
            id="ca.uvic.chisel.atlantis.tracedisplayer.TraceDisplayer"
            name="Trace Displayer">
      </editor>
   </extension>
   <!-- overwrite OpenActions -->
   <extension
         point="org.eclipse.ui.navigator.navigatorContent">
         <!-- id used to gbe "atlantis.navigator.actions.open" -->
      <actionProvider
            class="ca.uvic.chisel.atlantis.tracedisplayer.AtlantisBigFileOpenActionProvider"
            id="org.eclipse.ui.navigator.resources.OpenActions"
            overrides="org.eclipse.ui.navigator.resources.OpenActions"
            priority="highest">
            
         <enablement>
               <instanceof
                     value="org.eclipse.core.resources.IFile">
               </instanceof>
         </enablement>
      </actionProvider>
      
      
   </extension>
   
   <extension point="org.eclipse.ui.decorators">
	  <decorator
	    id="ca.uvic.chisel.atlantis.views.AtlantisIndexedFileDecorator"
	    label="Atlantis Indexed File System"
	    state="true"
	    class= "ca.uvic.chisel.atlantis.views.AtlantisIndexedFileDecorator"
	  objectClass="org.eclipse.core.resources.IResource"
	    adaptable="true">
	    <description>
	      Shows whether a given trace file set is indexed for the Atlantis system.
	    </description>
	  </decorator>
   </extension>
   
   <!-- Add DeIndex Actions http://www.eclipse.org/articles/Article-action-contribution/index.html#example2 -->
   <!--
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="ca.uvic.chisel.bfv.editor.DeIndexBigFileDelegate"
            id="ca.uvic.chisel.bfv.editor.DeIndexCommand"
            name="De-Index Command">
      </command>
   </extension>
	<extension point="org.eclipse.ui.menus"> 
		<menuContribution
	         locationURI="popup:org.eclipse.ui.popup.any?after=additions">
		   	<command
	               commandId="ca.uvic.chisel.bfv.editor.DeIndexCommand"
	               serialization="ca.uvic.chisel.bfv.editor.DeIndexBigFileDelegate(ca.uvic.chisel.bfv.editor.DeIndexCommandFile)"
	               label="De-Index Big File"
	               tooltip="Remove any derived binary files from the disk, or data base tables from MySQL."
	               style="push">
	         </command>
      </menuContribution>
	</extension>
	-->
	
	<extension
        point="org.eclipse.core.expressions.propertyTesters">
     <propertyTester          
        class="ca.uvic.chisel.atlantis.bytecodeparsing.AtlantisBinaryFormatFileTester"
           id="TestFileForBinaryFormat"
           namespace="atlantis.propertyTester"
           properties="checkFile"
           type="org.eclipse.core.resources.IFile">
     </propertyTester>
     </extension>
     
     <extension
        point="org.eclipse.core.expressions.propertyTesters">
     <propertyTester          
        class="ca.uvic.chisel.atlantis.bytecodeparsing.AtlantisBinaryFormatFolderTester"
           id="TestFolderForBinaryFormat"
           namespace="atlantis.propertyTester"
           properties="checkFolder"
           type="org.eclipse.core.resources.IFolder">
     </propertyTester>
     </extension>
	
	
	<!-- Tried this combined with the other nearly identical one, but could not get the <or> clause working properly.
	It would always select the first test and skip the second. -->
	<extension point="org.eclipse.ui.menus"> 
		<menuContribution
	         locationURI="popup:org.eclipse.ui.popup.any?after=additions">
		   	<command
	               commandId="ca.uvic.chisel.atlantis.handlers.OpenDualTrace"
	               serialization="ca.uvic.chisel.atlantis.handlers.OpenDualTraceHandler(ca.uvic.chisel.atlantis.handlers.OpenDualTraceFile)"
	               label="Open as Dual Trace"
	               tooltip="Open selected trace as dual trace, alongside active trace"
	               style="push">
	               <commandParameter
	               		id="atlantis.filePathParameter"
	               		name="filePathParameter">
               		</commandParameter>
		               <visibleWhen>
				           <with variable="selection">
	        			   <iterate operator="or" ifEmpty="false">
					           <or>
				                   
						           <test forcePluginActivation="true"
			            					property="atlantis.propertyTester.checkFile"
			             					value="true">
				                   </test>
			                   </or>
			               </iterate>
				           </with>
	            	   </visibleWhen>
	         </command>
      </menuContribution>
	</extension>
	
   
   <!-- used to be viewerId="org.eclipse.ui.navigator.ProjectExplorer"> -->
   
   <extension
         point="org.eclipse.ui.navigator.viewer">
      <viewerActionBinding
            viewerId="ca.uvic.chisel.bfv.views.BigFileProjectNavigator">
         <includes>
            <actionExtension
                  pattern="org.eclipse.ui.navigator.resources.OpenActions">
            </actionExtension>
         </includes>
      </viewerActionBinding>
   </extension>
   
   <extension
         id="ca.uvic.chisel.atlantis.project.TraceAnalysisProjectNature"
         point="org.eclipse.core.resources.natures">
      <runtime>
         <run
               class="ca.uvic.chisel.atlantis.project.TraceAnalysisProjectNature">
         </run>
      </runtime>
   </extension>
   <extension
         point="org.eclipse.ui.ide.projectNatureImages">
      <image
            icon="icons/alt_window_16.gif"
            id="ca.uvic.chisel.atlantis.icons.TraceAnalysisProjectIcon"
            natureId="ca.uvic.chisel.atlantis.project.TraceAnalysisProjectNature">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.newWizards">
      <category
            id="ca.uvic.chisel.atlantis.TraceAnalysisWizards"
            name="Trace Analysis">
      </category>
      <wizard
            category="ca.uvic.chisel.atlantis.TraceAnalysisWizards"
            class="ca.uvic.chisel.atlantis.wizards.TraceAnalysisProjectWizard"
            finalPerspective="ca.uvic.chisel.atlantis.perspective"
            icon="icons/alt_window_16.gif"
            id="ca.uvic.chisel.atlantis.wizards.TraceAnalysisProjectWizard"
            name="Trace Analysis Project"
            project="true">
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.viewer">
      <viewerActionBinding
            viewerId="ca.uvic.chisel.bfv.views.BigFileProjectNavigator">
         <includes>
            <actionExtension
                  pattern="org.eclipse.ui.navigator.resources.*">
            </actionExtension>
         </includes>
      </viewerActionBinding>
      <viewerContentBinding
            viewerId="ca.uvic.chisel.bfv.views.BigFileProjectNavigator">
         <includes>
            <contentExtension
                  pattern="org.eclipse.ui.navigator.resourceContent">
            </contentExtension>
            <contentExtension
                  pattern="org.eclipse.ui.navigator.resources.filters.*">
            </contentExtension>
            <contentExtension
                  pattern="org.eclipse.ui.navigator.resources.linkHelper">
            </contentExtension>
            <contentExtension
                  pattern="org.eclipse.ui.navigator.resources.workingSets">
            </contentExtension>
         </includes>
      </viewerContentBinding>
   </extension>
   <extension
         point="org.eclipse.ui.editors.annotationTypes">
      <type
            name="ca.uvic.chisel.atlantis.tracedisplayer.hexOccurrence">
      </type>
   </extension>
   <extension
         point="org.eclipse.ui.editors.markerAnnotationSpecification">
      <specification
            annotationType="ca.uvic.chisel.atlantis.tracedisplayer.hexOccurrence"
            colorPreferenceKey="hexOccurrenceColourPreference"
            colorPreferenceValue="255,204,255"
            contributesToHeader="false"
            highlightPreferenceKey="hexOccurrenceHighlightPreference"
            highlightPreferenceValue="true"
            includeOnPreferencePage="true"
            label="Hex Value Occurrences"
            overviewRulerPreferenceKey="hexOccurrenceOverviewRuler"
            overviewRulerPreferenceValue="true"
            textPreferenceKey="hexOccurrenceTextPreference"
            textPreferenceValue="false"
            verticalRulerPreferenceKey="hexOccurrenceVerticalRuler"
            verticalRulerPreferenceValue="false">
      </specification>
      <specification
            annotationType="ca.uvic.chisel.atlantis.tracedisplayer.tag"
            colorPreferenceKey="tagColourPreference"
            colorPreferenceValue="128,128,255"
            contributesToHeader="false"
            highlightPreferenceKey="tagHighlightPreference"
            highlightPreferenceValue="false"
            icon="icons/tag.gif"
            includeOnPreferencePage="true"
            label="Tags"
            overviewRulerPreferenceKey="tagOverviewRuler"
            overviewRulerPreferenceValue="true"
            textPreferenceKey="tagTextPreference"
            textPreferenceValue="true"
            textStylePreferenceKey="tagTextStylePreference"
            textStylePreferenceValue="SQUIGGLES"
            verticalRulerPreferenceKey="tagVerticalRuler"
            verticalRulerPreferenceValue="true">
      </specification>
      <specification
            annotationType="ca.uvic.chisel.atlantis.tracedisplayer.comment"
            colorPreferenceKey="commentColourPreference"
            colorPreferenceValue="128,128,128"
            contributesToHeader="false"
            highlightPreferenceKey="commentHighlightPreference"
            highlightPreferenceValue="false"
            icon="icons/comments.gif"
            includeOnPreferencePage="true"
            label="Comments"
            overviewRulerPreferenceKey="commentOverviewRuler"
            overviewRulerPreferenceValue="true"
            textPreferenceKey="commentTextPreference"
            textPreferenceValue="true"
            textStylePreferenceKey="commentTextStylePreference"
            textStylePreferenceValue="SQUIGGLES"
            verticalRulerPreferenceKey="commentVerticalRuler"
            verticalRulerPreferenceValue="true">
      </specification>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.RefreshMemoryViewHandler"
            id="ca.uvic.chisel.atlantis.commands.UpdateMemoryView"
            name="Update Memory View">
      </command>
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.ShowAllHandler"
            id="ca.uvic.chisel.atlantis.commands.ShowAll"
            name="Show All">
         <commandParameter
               id="ca.uvic.chisel.atlantis.commands.parameters.showAllTraceCompareViewerID"
               name="TraceCompareViewerID"
               optional="false">
         </commandParameter>
      </command>
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.ShowDifferencesHandler"
            id="ca.uvic.chisel.atlantis.commands.ShowDifferences"
            name="Show Differences">
         <commandParameter
               id="ca.uvic.chisel.atlantis.commands.parameters.showDifferencesTraceCompareViewerID"
               name="TraceCompareViewerID"
               optional="false">
         </commandParameter>
      </command>
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.ShowMatchesHandler"
            id="ca.uvic.chisel.atlantis.commands.ShowMatches"
            name="Show Matches">
         <commandParameter
               id="ca.uvic.chisel.atlantis.commands.parameters.showMatchesTraceCompareViewerID"
               name="TraceCompareViewerID"
               optional="false">
         </commandParameter>
      </command>
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.GenerateMemoryViewHandler"
            id="ca.uvic.chisel.atlantis.commands.GenerateMemoryView"
            name="GenerateMemoryView">
            <state
	       		class="org.eclipse.ui.handlers.RegistryToggleState:false"
	       		id="org.eclipse.ui.commands.toggleState">
		    </state> 
      </command>
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.AtlantisFindOccurrences"
            id="ca.uvic.chisel.atlantis.commands.FindOccurrences"
            name="Search for...">
      </command>
	  <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.OpenDualTraceHandler"
            id="ca.uvic.chisel.atlantis.commands.OpenDualTrace"
            name="Open Dual (Second) Trace">
      </command>
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.Force64BitRegistersHandler"
            id="ca.uvic.chisel.atlantis.commands.Force64BitRegisters"
            name="Force 64-bit Register Rendering for 32-bit Trace Lines">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState:false"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.ShowAdditionalRegistersHandler"
            id="ca.uvic.chisel.atlantis.commands.ShowAdditionalRegisters"
            name="Show Additional Registers">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState:false"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.LoadLibraryExportsHandler"
            id="ca.uvic.chisel.atlantis.commands.LoadLibraryExports"
            name="Load Library Exports">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState:false"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.ShowFunctionParentHandler"
            id="ca.uvic.chisel.atlantis.commands.ShowParentFunction"
            name="Show Function Parent of Target Line">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState:false"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
         <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.FindAllChannel"
            id="ca.uvic.chisel.atlantis.handlers.FindAllChannel"
            name="Find All Channels">
      </command>
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.FindTCPChannel"
            id="ca.uvic.chisel.atlantis.handlers.FindTCPChannel"
            name="Find TCP Channels">
      </command>
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.FindUDPChannel"
            id="ca.uvic.chisel.atlantis.handlers.FindUDPChannel"
            name="Find UDP Channels">
      </command>
      <command
            defaultHandler="ca.uvic.chisel.atlantis.handlers.FindNamedPipeChannel"
            id="ca.uvic.chisel.atlantis.handlers.FindNamedPipeChannel"
            name="Find Named Pipe Channels">
      </command>
   </extension>
   
   <extension
		point="org.eclipse.ui.handlers">
			<handler
				class="ca.uvic.chisel.atlantis.handlers.OpenDualTraceHandler"
				commandId="ca.uvic.chisel.atlantis.handlers.OpenDualTrace">
			</handler>
   </extension>
   
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="true"
            locationURI="menu:org.eclipse.ui.main.menu">
         <menu
               id="ca.uvic.chisel.atlantis.menus.File"
               label="File">
           <command
            	  label="Open Dual Trace Yo"
                  commandId="ca.uvic.chisel.atlantis.handlers.OpenDualTrace"
                  tooltip="Open a second trace to be analyzed with the currently active trace"
                  enable="true"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.newWizard"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.file.import"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.file.refresh"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.file.close"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.file.closeAll"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.file.exit"
                  style="push">
            </command>
         </menu>
         <menu
               id="ca.uvic.chisel.atlantis.menus.Window"
               label="Window">
            <command
                  commandId="org.eclipse.ui.views.showView"
                  style="push">
            </command>
            <separator
                  name="Perspective"
                  visible="true">
            </separator>
            <command
                  commandId="org.eclipse.ui.perspectives.showPerspective"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.window.customizePerspective"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.window.savePerspective"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.window.resetPerspective"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.window.closePerspective"
                  style="push">
            </command>
            <separator
                  name="Preferences"
                  visible="true">
            </separator>
            <command
                  commandId="org.eclipse.ui.window.preferences"
                  style="push">
            </command>
         </menu>
         <menu
               id="ca.uvic.chisel.atlantis.menus.Help"
               label="Help">
            <command
                  commandId="org.eclipse.ui.help.aboutAction"
                  icon="icons/alt_window_16.gif"
                  id="about"
                  label="About"
                  style="push">
            </command>
         </menu>
         <menu
               id="ca.uvic.chisel.bfv.commands.Tools"
               label="Tool">  
         <menu
               id="ca.uvic.chisel.bfv.commands.FindCommunicationChannel"
               label="Find Communication Channels">  
            <command
               commandId="ca.uvic.chisel.atlantis.handlers.FindAllChannel"
               label="All"
               style="push">
            </command>
            <command
               commandId="ca.uvic.chisel.atlantis.handlers.FindTCPChannel"
               label="TCP Channels"
               style="push">
            </command>
            <command
               commandId="ca.uvic.chisel.atlantis.handlers.FindUDPChannel"
               label="UDP Channels"
               style="push">
            </command>
            <command
               commandId="ca.uvic.chisel.atlantis.handlers.FindNamedPipeChannel"
               label="Named Pipe Channels"
               style="push">
            </command>
            </menu>
          </menu>
      </menuContribution>
      
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar">
         <toolbar
               id="ca.uvic.chisel.atlantis.toolbars.General"
               label="General">
            <command
                  commandId="org.eclipse.ui.newWizard"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.file.import"
                  style="push">
            </command>
         </toolbar>
         <toolbar
               id="ca.uvic.chisel.bfv.toolbars.Editor"
               label="Annotation Tools">
            <command
                  commandId="ca.uvic.chisel.bfv.commands.AddComment"
                  icon="icons/add_comment.gif"
                  style="push"
                  tooltip="Add comment at current location">
               <visibleWhen>
	               <with
	                     variable="activeEditorId">
	                  <equals
	                        value="ca.uvic.chisel.atlantis.tracedisplayer.TraceDisplayer">
	                  </equals>
	               </with>
            	</visibleWhen>
            </command>
            <command
                  commandId="ca.uvic.chisel.bfv.commands.AddTag"
                  icon="icons/add_tag.gif"
                  style="push"
                  tooltip="Add tag at current location">
               <visibleWhen>
	               <with
	                     variable="activeEditorId">
	                  <equals
	                        value="ca.uvic.chisel.atlantis.tracedisplayer.TraceDisplayer">
	                  </equals>
	               </with>
            	</visibleWhen>
            </command>
            <command
                  commandId="ca.uvic.chisel.bfv.commands.CreateRegion"
                  icon="icons/alt_window_16.gif"
                  style="push"
                  tooltip="Create region with selected lines">
               <visibleWhen>
	               <with
	                     variable="activeEditorId">
	                  <equals
	                        value="ca.uvic.chisel.atlantis.tracedisplayer.TraceDisplayer">
	                  </equals>
	               </with>
            	</visibleWhen>
            </command>
         </toolbar>
      </menuContribution>
      
      <menuContribution
            allPopups="false"
            locationURI="popup:#TraceDisplayerContext">
         <separator
               name="Trace Displayer Tools"
               visible="true">
         </separator>
         <command
               commandId="ca.uvic.chisel.atlantis.commands.FindOccurrences"
               label="Search for..."
               style="push">
         </command>
          <command
               commandId="ca.uvic.chisel.atlantis.commands.UpdateMemoryView"
               label="Update Memory View"
               style="push">
         </command>
      </menuContribution>
       <menuContribution
            allPopups="false"
            locationURI="popup:#BigFileEditorContext">
         <separator
               name="Atlantis Additions"
               visible="true">
         </separator>
         <command
               commandId="ca.uvic.chisel.atlantis.commands.ShowParentFunction"
               label="Show Parent Function in Functions View"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:ca.uvic.chisel.atlantis.views.MemoryVisualization">
        <command
               commandId="ca.uvic.chisel.atlantis.commands.GenerateMemoryView"
               icon="icons/start.gif"
               style="toggle"
               tooltip="Toggle Automatic Update">
               <state class="org.eclipse.ui.handlers.RegistryToggleState:true"
				     id="org.eclipse.ui.commands.toggleState">
				</state>
         </command>
         
      </menuContribution>
      
      <menuContribution
            allPopups="false"
            locationURI="toolbar:ca.uvic.chisel.atlantis.views.RegistersView">
        <command
               commandId="ca.uvic.chisel.atlantis.commands.Force64BitRegisters"
               icon="icons/64bit-16.png"
               style="toggle"
               tooltip="Force registers to show 64-bit for all instructions">
        </command>
      </menuContribution>
      
      <menuContribution
            allPopups="false"
            locationURI="toolbar:ca.uvic.chisel.atlantis.views.RegistersView">
        <command
               commandId="ca.uvic.chisel.atlantis.commands.ShowAdditionalRegisters"
               icon="icons/moreregisters.gif"
               style="toggle"
               tooltip="Show Additional Registers">
         </command>
         
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:ca.uvic.chisel.atlantis.views.FunctionsView">
         <command
               commandId="ca.uvic.chisel.atlantis.commands.LoadLibraryExports"
               icon="icons/load_library_exports.gif"
               style="push"
               tooltip="Load Library Exports">
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.compare.contentMergeViewers">
      <viewer
            class="ca.uvic.chisel.atlantis.compare.TraceCompareViewerCreator"
            extensions="trace"
            id="ca.uvic.chisel.atlantis.compare.TraceCompareViewer"
            label="Trace Compare">
      </viewer>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="ca.uvic.chisel.atlantis.preferences.TraceAnalysisPreferencePage"
            id="ca.uvic.chisel.atlantis.preferences.TraceAnalysisPreferencePage"
            name="Trace Analysis">
      </page>
      <page
            category="ca.uvic.chisel.atlantis.preferences.TraceAnalysisPreferencePage"
            class="ca.uvic.chisel.atlantis.preferences.SyntaxHighlightingPreferencePage"
            id="ca.uvic.chisel.atlantis.preferences.SyntaxHighlightingPreferencePage"
            name="Syntax Highlighting">
      </page>
      <page
            category="ca.uvic.chisel.atlantis.preferences.TraceAnalysisPreferencePage"
            class="ca.uvic.chisel.atlantis.preferences.DatabaseConnectionPreferencePage"
            id="ca.uvic.chisel.atlantis.preferences.DatabaseConnectionPreferencePage"
            name="Database Connection">
      </page>
   </extension>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="ca.uvic.chisel.atlantis.preferences.PreferenceInitializer">
      </initializer>
   </extension>
   
      <extension
         point="ca.uvic.chisel.bfv.SyntaxHighlightingManagerFactory">
      <implementation
            class="ca.uvic.chisel.atlantis.tracedisplayer.AtlantisSyntaxHighlightingManagerFactory"
            priority="1">
      </implementation>
   </extension>
   <extension
         point="ca.uvic.chisel.bfv.IFileModelDataLayerFactory">
      <implementation
            class="ca.uvic.chisel.atlantis.datacache.AtlantisFileModelDataLayerFactory"
            priority="1">
      </implementation>
   </extension>
   <extension
         point="ca.uvic.chisel.bfv.utils.IFileUtils">
      <implementation
            class="ca.uvic.chisel.atlantis.utils.AtlantisFileUtils"
            priority="1">
      </implementation>
   </extension>

</plugin>
